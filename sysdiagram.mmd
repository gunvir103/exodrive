graph TB
    %% Frontend Layer
    subgraph Frontend["ðŸŽ¨ Frontend - Next.js 15"]
        subgraph Pages["Pages"]
            HomePage["ðŸ  Homepage"]
            Fleet["ðŸš— Fleet Browse"]
            CarDetail["ðŸš™ Car Details"]
            Booking["ðŸ“… Booking"]
            Admin["ðŸ” Admin Panel"]
            Auth["ðŸ”‘ Auth"]
        end
        
        subgraph Components["Components"]
            UILib["ðŸ“¦ UI Library"]
            CustomUI["ðŸŽ¨ Custom UI"]
            Contexts["ðŸŽ¯ Contexts"]
        end
    end

    %% API Layer
    subgraph API["âš¡ API Routes"]
        PublicAPI["ðŸŒ Public APIs"]
        AdminAPI["ðŸ› ï¸ Admin APIs"]
        Webhooks["ðŸ”” Webhooks"]
    end

    %% Database Layer
    subgraph Database["ðŸ’¾ Database - Supabase"]
        Tables["ðŸ“Š Tables"]
        Functions["âš™ï¸ Functions"]
        Security["ðŸ”’ Security"]
    end

    %% External Services
    subgraph External["ðŸŒ External Services"]
        PayPal["ðŸ’³ PayPal"]
        Email["ðŸ“§ Resend"]
        Contracts["ðŸ“ DocuSeal"]
        Cache["âš¡ Redis"]
        Maps["ðŸ—ºï¸ Google Maps"]
    end

    %% Supabase Services
    subgraph Supabase["â˜ï¸ Supabase Platform"]
        SupaAuth["ðŸ”‘ Auth"]
        Storage["ðŸ“ Storage"]
        EdgeFn["âš¡ Edge Functions"]
        Realtime["ðŸ”„ Realtime"]
    end

    %% Infrastructure
    subgraph Infra["ðŸ—ï¸ Infrastructure"]
        Vercel["â–² Vercel"]
        GitHub["ðŸ™ GitHub"]
        Monitor["ðŸ“Š Monitoring"]
    end

    %% Main User Flow
    HomePage --> Fleet
    Fleet --> CarDetail
    CarDetail --> Booking
    Booking --> PublicAPI
    PublicAPI --> PayPal
    PublicAPI --> Tables
    
    %% Admin Flow
    Auth --> Admin
    Admin --> AdminAPI
    AdminAPI --> Tables
    
    %% Payment Flow
    PayPal --> Webhooks
    Webhooks --> Functions
    Functions --> Tables
    
    %% Email Flow
    PublicAPI --> Email
    Email --> Webhooks
    
    %% Contract Flow
    Booking --> Contracts
    Contracts --> Webhooks
    
    %% Cache Flow
    PublicAPI --> Cache
    Cache --> Tables
    
    %% Storage Flow
    Admin --> Storage
    CarDetail --> Storage
    
    %% Auth Flow
    Auth --> SupaAuth
    SupaAuth --> Tables
    SupaAuth --> Security
    
    %% Edge Functions
    PublicAPI --> EdgeFn
    EdgeFn --> Functions
    
    %% Deployment
    GitHub --> Vercel
    Vercel --> Frontend
    Vercel --> Monitor
    
    %% Real-time Updates
    Tables --> Realtime
    Realtime --> Admin

    %% Style Classes
    classDef frontend fill:#e3f2fd,stroke:#1565c0,stroke-width:2px,color:#000
    classDef api fill:#fff8e1,stroke:#f57c00,stroke-width:2px,color:#000
    classDef database fill:#f3e5f5,stroke:#6a1b9a,stroke-width:2px,color:#000
    classDef external fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef supabase fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    classDef infra fill:#f1f8e9,stroke:#558b2f,stroke-width:2px,color:#000
    
    class HomePage,Fleet,CarDetail,Booking,Admin,Auth,UILib,CustomUI,Contexts frontend
    class PublicAPI,AdminAPI,Webhooks api
    class Tables,Functions,Security database
    class PayPal,Email,Contracts,Cache,Maps external
    class SupaAuth,Storage,EdgeFn,Realtime supabase
    class Vercel,GitHub,Monitor infra